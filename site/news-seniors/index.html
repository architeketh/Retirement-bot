<!doctype html>
<html lang="en"><head>
<meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
<title>Seniors Daily News — Retirement Hub</title>
<link rel="stylesheet" href="../assets/styles.css">
<style>
.page{width:min(1100px,92%);margin:0 auto;padding:28px 0}
.news-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:16px}
.news-card{display:flex;flex-direction:column;text-decoration:none;color:inherit;background:#fff;border:1px solid #eee;border-radius:16px;box-shadow:0 6px 20px rgba(0,0,0,.08);overflow:hidden}
.img-wrap{aspect-ratio:16/9;background:#fafafa}
.img-wrap img{width:100%;height:100%;object-fit:cover;display:block}
.body{padding:12px 14px}
.source{color:#666;font-size:12px}
.title{margin:.25rem 0 .35rem;font-size:16px;font-weight:600}
.desc{margin:0;color:#444;font-size:14px;line-height:1.35}
.toolbar{display:flex;gap:10px;align-items:center;flex-wrap:wrap;margin-bottom:12px}
.btn{display:inline-block;padding:8px 14px;border:1px solid #e5e7eb;border-radius:999px;background:#fff}
.btn-primary{background:#2563eb;color:#fff;border-color:#2563eb}
</style>
</head>
<body>
<div class="page">
  <h1>Seniors Daily News</h1>
  <div class="toolbar">
    <a class="btn" href="../">← Back to Home</a>
    <a class="btn btn-primary" href="archive.html">Archive</a>
  </div>
  <div id="news" class="news-grid"></div>
</div>
<script>
(async function(){
  const mount = document.getElementById('news');
  try{
    const r = await fetch('../data/news.json', {cache:"no-store"});
    if(!r.ok) throw new Error("load failed");
    const data = await r.json();
    const list = Array.isArray(data)?data:(data.items||[]);
    const esc = s=>String(s||"").replace(/[&<>"']/g,m=>({ "&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"}[m]));
    const norm = i=>({title:i.title||"(Untitled)",url:i.url||"#",image:i.image||"",desc:i.summary||"",source:i.source||"",date:i.published||i.published_at||""});
    mount.innerHTML = (list.map(norm).map(n=>`
      <a class="news-card" href="${esc(n.url)}" target="_blank" rel="noopener">
        <div class="img-wrap">${n.image?`<img src="${esc(n.image)}" alt="">`:""}</div>
        <div class="body">
          <div class="source">${esc(n.source)} ${n.date?`• ${esc(new Date(n.date).toLocaleDateString())}`:""}</div>
          <div class="title">${esc(n.title)}</div>
          ${n.desc?`<p class="desc">${esc(n.desc).slice(0,180)}</p>`:""}
        </div>
      </a>`).join("")) || "<p>No news items found.</p>";
  }catch(e){
    mount.innerHTML = "<p>Couldn't load news.json.</p>";
  }
})();
</script>
</body></html>
