<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Seniors Daily News — Retirement Hub</title>
<link rel="stylesheet" href="../assets/styles.css?v=hero3">
</head>
<body>

<!-- Top bar (same style as home) -->
<header class="topbar">
  <div class="wrap topbar-inner">
    <a class="brand" href="../">
      <img src="../assets/logo.svg" alt="" class="brand-logo" onerror="this.style.display='none'">
      <span class="brand-text">Retirement <strong>Hub</strong></span>
    </a>
    <nav class="topnav">
      <a href="../#links">Links</a>
      <a href="../#lifestyle">Lifestyle</a>
      <a href="../#financial">Financial</a>
      <a href="../#articles">Articles</a>
      <a href="./archive.html" class="contrast">Archive</a>
    </nav>
  </div>
</header>

<main class="wrap" style="padding-top:18px">
  <h1 style="margin:0 0 6px">Seniors Daily News</h1>
  <p class="muted" id="newsUpdated">Updated:</p>
  <div class="news-toolbar" style="display:flex;gap:10px;flex-wrap:wrap;margin:10px 0 16px">
    <a class="btn" href="../">← Back to Home</a>
    <a class="btn btn-primary" href="./archive.html">Open Archive</a>
  </div>

  <div id="newsGrid" class="grid"></div>
</main>

<footer class="wrap footer">
  <p class="muted">Shows up to 10 fresh items a day from trusted senior-focused sources.</p>
</footer>

<script>
(async function(){
  const updatedEl = document.getElementById('newsUpdated');
  const mount = document.getElementById('newsGrid');

  function esc(s){ return String(s||"").replace(/[&<>"']/g, m => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;','\'':'&#39;'}[m])); }
  function card(n){
    const img = n.image ? `<img class="thumb" src="${esc(n.image)}" alt="">` : '';
    const date = n.published ? new Date(n.published).toLocaleDateString() : '';
    const sub = [n.source||'', date].filter(Boolean).join(' • ');
    const summary = (n.summary||'').trim();
    return `
      <article>
        ${img}
        <h3><a href="${esc(n.url||'#')}" target="_blank" rel="noopener">${esc(n.title||'(Untitled)')}</a></h3>
        ${sub?`<p class="muted" style="margin:.15rem 0 .35rem">${esc(sub)}</p>`:''}
        ${summary?`<p>${esc(summary).slice(0,180)}</p>`:''}
      </article>`;
  }

  try{
    const r = await fetch('../data/news.json?v=' + Date.now(), {cache:'no-store'});
    if(!r.ok) throw new Error('load failed');
    const data = await r.json();
    const items = Array.isArray(data) ? data : (data.items || []);
    if (data.fetched_at) {
      const d = new Date(data.fetched_at);
      updatedEl.textContent = 'Updated: ' + d.toLocaleString();
    }
    mount.innerHTML = items.map(card).join('') || '<p>No news items yet.</p>';
  }catch(e){
    mount.innerHTML = '<p>Could not load news. Please try again later.</p>';
  }
})();
</script>
</body>
</html>
